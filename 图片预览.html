<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<!-- 一个能上传多媒体文件的表单 
	<input type="file" id="upload-file" multiple />

	<!-- 显示图片的地方 
	<div id="destination"></div>
	-->
	<p>  
    <label>请选择一个文件：</label>  
    <input type="file" id="file" />  
    <input type="button" value="读取图像" onclick="readAsDataURL()" />  
    <input type="button" value="读取二进制数据" onclick="readAsBinaryString()" />  
    <input type="button" value="读取文本文件" onclick="readAsText()" />  
</p> 
<p><input type="file" id="file2"></p> 
<div id="result" name="result"></div>  
<script>
/*
	document.getElementById('upload-file').addEventListener('change', function() {
		var file;
		var destination = document.getElementById('destination');
		destination.innerHTML = '';

		// 循环用户多选的文件
		for(var x = 0, xlen = this.files.length; x < xlen; x++) {
			file = this.files[x];
			if(file.type.indexOf('image') != -1) { // 非常简单的交验

				var reader = new FileReader();

				reader.onload = function(e) {
					var img = new Image();
					img.src = e.target.result; // 显示图片的地方

					destination.appendChild(img);
				};
				
				reader.readAsDataURL(file);
			}
		}
	});

*/
</script>

<script type="text/javascript">  
	
	var result=document.getElementById("result");  
	var file=document.getElementById("file");  
	
	  
	//判断浏览器是否支持FileReader接口  
	if(typeof FileReader == 'undefined'){  
	    result.InnerHTML="<p>你的浏览器不支持FileReader接口！</p>";  
	    //使选择控件不可操作  
	    file.setAttribute("disabled","disabled");  
	}  
	  
	function readAsDataURL(){  
	    //检验是否为图像文件  
	    var file = document.getElementById("file").files[0];  
	    if(!/image\/\w+/.test(file.type)){  
	        alert("看清楚，这个需要图片！");  
	        return false;  
	    }  
	    var reader = new FileReader();  
	    //将文件以Data URL形式读入页面  
	    reader.readAsDataURL(file);  
	    reader.onload=function(e){  
	        var result=document.getElementById("result");  
	        //显示文件  
	        result.innerHTML='<img src="' + this.result +'" alt="" />';  
	    }  
	}  
	  
	function readAsBinaryString(){  
	    var file = document.getElementById("file").files[0];  
	    var reader = new FileReader();  
	    //将文件以二进制形式读入页面  
	    reader.readAsBinaryString(file);  
	    reader.onload=function(f){  
	        var result=document.getElementById("result");  
	        //显示文件  
	        result.innerHTML=this.result;  
	    }  
	}  
	  
	function readAsText(){  
	    var file = document.getElementById("file").files[0];  
	    var reader = new FileReader();  
	    //将文件以文本形式读入页面  
	    reader.readAsText(file);  
	    reader.onload=function(f){  
	        var result=document.getElementById("result");  
	        //显示文件  
	        result.innerHTML=this.result;  
	    }  
	}  

	
	
//我写的
	var inputfifle = document.getElementById('file2');
	
	inputfifle.addEventListener('change',function(){
		    //检验是否为图像文件  
	    var file = document.getElementById("file2").files[0];  
	  
	    var reader = new FileReader();  
	    //将文件以Data URL形式读入页面  
	    reader.readAsDataURL(file);  
	    reader.onload=function(e){  
	        var result=document.getElementById("result");  
	        //显示文件  
	        result.innerHTML='<img src="' + this.result +'" alt="" />';  
	    }
	})
</script>  
</body>
</html>